/**
 * Контроллер роста растений в гидропонной системе
 * 
 * Этот класс реализует паттерн Controller из MVC архитектуры.
 * Инкапсулирует бизнес-логику взаимодействия между представлением (UI) и моделью данных.
 * Предоставляет упрощенный API для компонентов React.
 */

import { GrowthModel } from '../models/GrowthModel';
import { Parameters } from '../models/Parameters';
import { SimulationResult } from '../models/SimulationResult';

/**
 * Контроллер для управления симуляцией роста растений
 * 
 * Служит посредником между пользовательским интерфейсом и моделью данных.
 * Инкапсулирует логику обновления параметров и выполнения симуляций.
 */
export class GrowthController {
    /** Ссылка на модель данных */
    private model: GrowthModel;

    /**
     * Конструктор контроллера
     * 
     * @param model - Экземпляр модели роста растений
     */
    constructor(model: GrowthModel) {
        this.model = model;
    }

    /**
     * Обновление отдельного параметра симуляции
     * 
     * Упрощенный метод для обновления одного параметра.
     * Используется компонентами формы для обновления значений в реальном времени.
     * 
     * @param name - Название параметра для обновления
     * @param value - Новое значение параметра (число или строка)
     */
    updateParameter(name: keyof Parameters, value: number | string) {
        // Создаем объект с одним обновляемым параметром
        this.model.setParameters({ [name]: value });
    }

    /**
     * Выполнение симуляции роста растений
     * 
     * Запускает расчеты на основе текущих параметров и возвращает результат.
     * 
     * @returns Результат симуляции с прогнозом урожайности и рекомендациями
     */
    simulate(): SimulationResult {
        return this.model.simulate();
    }

    /**
     * Получение текущих параметров симуляции
     * 
     * Возвращает копию всех текущих параметров для отображения в UI.
     * 
     * @returns Текущие параметры симуляции
     */
    getParameters(): Parameters {
        return this.model.getParameters();
    }
}